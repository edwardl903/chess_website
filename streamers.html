<!DOCTYPE html>
<html>
<head>
    <title>Chess.com Streamers</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            text-align: center;
        }

        #streamers-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .streamer {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        .streamer img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .streamer p {
            font-weight: bold;
        }

        .streamer a {
            display: block;
            margin-top: 10px;
            text-decoration: none;
            color: #007bff;
        }
    </style>
</head>
<body>
    <h1>Streamers</h1>
    <div id="streamers-container"></div>
    <script>
        const streamersContainer = document.getElementById('streamers-container');

        function createStreamerElement(streamer) {
            const streamerDiv = document.createElement('div');
            streamerDiv.classList.add('streamer');

            const avatarImg = document.createElement('img');
            avatarImg.src = streamer.avatar;
            streamerDiv.appendChild(avatarImg);

            const usernameP = document.createElement('p');
            usernameP.textContent = streamer.username;
            streamerDiv.appendChild(usernameP);

            const twitchLink = document.createElement('a');
            twitchLink.href = streamer.twitch_url;
            twitchLink.textContent = 'Twitch Channel';
            streamerDiv.appendChild(twitchLink);

            return streamerDiv;
        }

        function fetchStreamers() {
            fetch('https://api.chess.com/pub/streamers')
                .then(response => response.json())
                .then(data => {
                    // Clear the previous content if any
                    streamersContainer.innerHTML = '';

                    // Get the top 50 streamers
                    const top50Streamers = data.streamers.slice(0, 50);

                    // Loop through the top 50 streamers and create HTML elements to display the information
                    top50Streamers.forEach(streamer => {
                        const streamerElement = createStreamerElement(streamer);
                        streamersContainer.appendChild(streamerElement);
                    });
                })
                .catch(error => {
                    console.error('Error fetching streamers:', error);
                });
        }

        // Fetch the top 50 streamers initially and then refresh every 5 minutes
        fetchStreamers();
        setInterval(fetchStreamers, 5 * 60 * 1000); // 5 minutes in milliseconds
    </script>
</body>
</html>
